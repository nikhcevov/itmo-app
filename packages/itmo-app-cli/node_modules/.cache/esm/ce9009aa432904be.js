let fetch,JSDOM,tap,parseGroups,parseSchedule;_432‍.w("node-fetch",[["default",["fetch"],function(v){fetch=v}]]);_432‍.w("jsdom",[["JSDOM",["JSDOM"],function(v){JSDOM=v}]]);_432‍.w("babel-tap",[["default",["tap"],function(v){tap=v}]]);_432‍.w("../scripts/parseGroups",[["default",["parseGroups"],function(v){parseGroups=v}]]);_432‍.w("../scripts/parseSchedule",[["default",["parseSchedule"],function(v){parseSchedule=v}]]);






// BE CAREFULL!!! IT IS NOT JEST, IT IS TAP TESTER
// yarn tap ./test/allGroupsScheduleParse.test.js

async function getGroups () {
  const response = await fetch('https://itmo.ru/ru//schedule/raspisanie_zanyatiy.htm')
  const parsed = await response.text()
  return parseGroups(new JSDOM(parsed))
}

getGroups().then(groups => {
  groups.forEach(group => {
    tap.test(`should parse schedule of group ${group}`, async (tester) => {
      const response = await fetch(`https://itmo.ru/ru/schedule/0/${group}/schedule.htm`)
      const parsed = await response.text()
      const result = parseSchedule(new JSDOM(parsed))
      tester.ok(result.odd.length > 0 && result.even.length > 0, `group parsed: ${group}`)
    })
  })
})
